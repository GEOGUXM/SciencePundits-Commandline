Epidemiological studies have suggested that increasing connectivity in metapopulations usually facilitates pathogen transmission. However, these studies focusing on single-host systems usually neglect that increasing connectivity can increase species diversity which might reduce pathogen transmission via the 'dilution effect', a hypothesis whose generality is still disputed. On the other hand, studies investigating the generality of the dilution effect were usually conducted without considering habitat structure, which is surprising as species loss is often driven by habitat fragmentation. Using a simple general model to link fragmentation to the dilution effect, we determined the effect of connectivity on disease risk and explored when the dilution effect can be detected. We showed that landscape structure can largely modify the diversity-disease relationship. The net impact of connectivity on disease risk can be either positive or negative, depending on the relative importance of the facilitation effect (through increasing contact rates among patches) versus the dilution effect (via increasing species richness). We also demonstrated that different risk indices (i.e. infection prevalence and abundance of infected hosts) react differently to increasing connectivity and species richness. Our study may contribute to the current debate on the dilution effect, and a better understanding of the impacts of fragmentation on disease risks. Â© 2015 Elsevier Ltd.